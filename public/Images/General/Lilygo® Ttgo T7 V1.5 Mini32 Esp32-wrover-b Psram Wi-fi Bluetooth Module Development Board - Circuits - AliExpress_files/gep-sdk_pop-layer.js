(window["webpackJsonp-ae-fe/cosmos-1"]=window["webpackJsonp-ae-fe/cosmos-1"]||[]).push([[7],{314:function(t,n,e){"use strict";n.deprecate=function(t,n){var e=!0;return function(){return e&&(console.warn("DeprecationWarning: "+n),e=!1),t.apply(this,arguments)}}},354:function(t,n,e){"use strict";e.d(n,"a",(function(){return u}));var r=e(724),o=["interactive","complete"],c=function(t,n){return new Promise((function(e){t&&"function"!=typeof t&&(n=t,t=null),n=n||window.document;var r=function(){return e(void(t&&setTimeout(t)))};o.includes(n.readyState)?r():n.addEventListener("DOMContentLoaded",r)}))};c.resume=function(t){return function(n){return c(t).then((function(){return n}))}};var i=c,u=function(){function t(){this.hooks={onLoad:new r.AsyncParallelBailHook,onFiveSecond:new r.AsyncParallelBailHook,onEightSecond:new r.AsyncParallelBailHook,onTenSecond:new r.AsyncParallelBailHook}}return t.prototype.run=function(t){var n=this;i((function(){n.hooks.onLoad.callAsync(t),setTimeout((function(){n.hooks.onFiveSecond.callAsync(t)}),5e3),setTimeout((function(){n.hooks.onEightSecond.callAsync(t)}),8e3),setTimeout((function(){n.hooks.onTenSecond.callAsync(t)}),1e4)}))},t}()},356:function(t,n,e){"use strict";e.d(n,"a",(function(){return r}));var r=function(){function t(t){this.containerQuerySelector="BODY",this.containerQuerySelector=t||"BODY"}return t.prototype.apply=function(t){var n=this;t.hooks.onEightSecond.tapAsync("dom",(function(t){var e=document.querySelector(n.containerQuerySelector),r=(null==e?void 0:e.querySelectorAll("*:not(script):not(noscript):not(link):not(style)"))||[];if(Array.from(r).length<=5)return t({c1:"DOM",c2:n.containerQuerySelector,c3:Array.from(r).length,c4:"",c5:""});t()}))},t}()},357:function(t,n,e){"use strict";e.d(n,"a",(function(){return r}));var r=function(){function t(t){this.containerQuerySelector="BODY",this.containerQuerySelector=t||"BODY"}return t.prototype.apply=function(t){var n=this,e=[];t.hooks.onLoad.tapAsync("registerImages",(function(t){var r=document.querySelector(n.containerQuerySelector);e=Array.from((null==r?void 0:r.querySelectorAll('img[src]:not([src=""])'))||[]),t()})),t.hooks.onEightSecond.tapAsync("images",(function(t){var r=e.reduce((function(t,n){return n.complete&&n.naturalHeight?t+1:t}),0);if(e.length&&r/e.length<.5)return t({c1:"PIC_LOAD_RATIO",c2:n.containerQuerySelector,c3:r/e.length,c4:"",c5:""});t()}))},t}()},358:function(t,n,e){"use strict";e.d(n,"a",(function(){return r}));var r=function(){function t(t){this.containerQuerySelector="BODY",this.containerQuerySelector=t||"BODY"}return t.prototype.apply=function(t){var n=this;t.hooks.onEightSecond.tapAsync("rect",(function(t){var e,r=(null===(e=document.querySelector(n.containerQuerySelector))||void 0===e?void 0:e.getBoundingClientRect())||{height:0,width:0};if(r.height<50||r.width<50)return t({c1:"RECT",c2:n.containerQuerySelector,c3:r.height+"*"+r.width,c4:"",c5:""});t()}))},t}()},359:function(t,n,e){"use strict";function r(t){var n=t.getContext("2d");if(!n)return!1;for(var e=n.getImageData(0,0,t.offsetWidth||t.width,t.offsetHeight||t.height),r=0;r<e.data.length;r+=4)if(0!==e.data[r+3]&&255!==e.data[r]&&255!==e.data[r+1]&&255!==e.data[r+2])return!1;return!0}e.d(n,"a",(function(){return o}));var o=function(){function t(t){this.containerQuerySelector="BODY",this.containerQuerySelector=t||"BODY"}return t.prototype.apply=function(t){var n=this;t.hooks.onEightSecond.tapAsync("canvas",(function(t){var e=document.querySelector(n.containerQuerySelector),o=(null==e?void 0:e.querySelectorAll("canvas"))||[],c=Array.from(o).find(r);if(c){var i="#"+(c.id||"")+"."+(c.className||"");return t({c1:"CANVAS",c2:n.containerQuerySelector,c3:i,c4:"",c5:""})}t()}))},t}()},724:function(t,n,e){"use strict";n.__esModule=!0,n.SyncHook=e(725),n.SyncBailHook=e(726),n.SyncWaterfallHook=e(727),n.SyncLoopHook=e(728),n.AsyncParallelHook=e(729),n.AsyncParallelBailHook=e(730),n.AsyncSeriesHook=e(731),n.AsyncSeriesBailHook=e(732),n.AsyncSeriesLoopHook=e(733),n.AsyncSeriesWaterfallHook=e(734),n.HookMap=e(735),n.MultiHook=e(736)},725:function(t,n,e){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function c(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,n){return(i=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function u(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,n){return!n||"object"!==r(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=e(81),l=new(function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&i(t,n)}(s,t);var n,e,r,a=u(s);function s(){return o(this,s),a.apply(this,arguments)}return n=s,(e=[{key:"content",value:function(t){var n=t.onError,e=t.onDone,r=t.rethrowIfPossible;return this.callTapsSeries({onError:function(t,e){return n(e)},onDone:e,rethrowIfPossible:r})}}])&&c(n.prototype,e),r&&c(n,r),s}(e(86))),p=function(){throw new Error("tapAsync is not supported on a SyncHook")},y=function(){throw new Error("tapPromise is not supported on a SyncHook")},h=function(t){return l.setup(this,t),l.create(t)};function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,e=new f(t,n);return e.constructor=v,e.tapAsync=p,e.tapPromise=y,e.compile=h,e}v.prototype=null,t.exports=v},726:function(t,n,e){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function c(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,n){return(i=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function u(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,n){return!n||"object"!==r(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=e(81),l=new(function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&i(t,n)}(s,t);var n,e,r,a=u(s);function s(){return o(this,s),a.apply(this,arguments)}return n=s,(e=[{key:"content",value:function(t){var n=t.onError,e=t.onResult,r=t.resultReturns,o=t.onDone,c=t.rethrowIfPossible;return this.callTapsSeries({onError:function(t,e){return n(e)},onResult:function(t,n,r){return"if(".concat(n," !== undefined) {\n").concat(e(n),";\n} else {\n").concat(r(),"}\n")},resultReturns:r,onDone:o,rethrowIfPossible:c})}}])&&c(n.prototype,e),r&&c(n,r),s}(e(86))),p=function(){throw new Error("tapAsync is not supported on a SyncBailHook")},y=function(){throw new Error("tapPromise is not supported on a SyncBailHook")},h=function(t){return l.setup(this,t),l.create(t)};function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,e=new f(t,n);return e.constructor=v,e.tapAsync=p,e.tapPromise=y,e.compile=h,e}v.prototype=null,t.exports=v},727:function(t,n,e){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function c(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,n){return(i=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function u(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,n){return!n||"object"!==r(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=e(81),l=new(function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&i(t,n)}(s,t);var n,e,r,a=u(s);function s(){return o(this,s),a.apply(this,arguments)}return n=s,(e=[{key:"content",value:function(t){var n=this,e=t.onError,r=t.onResult,o=t.resultReturns,c=t.rethrowIfPossible;return this.callTapsSeries({onError:function(t,n){return e(n)},onResult:function(t,e,r){var o="";return o+="if(".concat(e," !== undefined) {\n"),o+="".concat(n._args[0]," = ").concat(e,";\n"),o+="}\n",o+=r()},onDone:function(){return r(n._args[0])},doneReturns:o,rethrowIfPossible:c})}}])&&c(n.prototype,e),r&&c(n,r),s}(e(86))),p=function(){throw new Error("tapAsync is not supported on a SyncWaterfallHook")},y=function(){throw new Error("tapPromise is not supported on a SyncWaterfallHook")},h=function(t){return l.setup(this,t),l.create(t)};function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");var e=new f(t,n);return e.constructor=v,e.tapAsync=p,e.tapPromise=y,e.compile=h,e}v.prototype=null,t.exports=v},728:function(t,n,e){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function c(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,n){return(i=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function u(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,n){return!n||"object"!==r(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=e(81),l=new(function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&i(t,n)}(s,t);var n,e,r,a=u(s);function s(){return o(this,s),a.apply(this,arguments)}return n=s,(e=[{key:"content",value:function(t){var n=t.onError,e=t.onDone,r=t.rethrowIfPossible;return this.callTapsLooping({onError:function(t,e){return n(e)},onDone:e,rethrowIfPossible:r})}}])&&c(n.prototype,e),r&&c(n,r),s}(e(86))),p=function(){throw new Error("tapAsync is not supported on a SyncLoopHook")},y=function(){throw new Error("tapPromise is not supported on a SyncLoopHook")},h=function(t){return l.setup(this,t),l.create(t)};function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,e=new f(t,n);return e.constructor=v,e.tapAsync=p,e.tapPromise=y,e.compile=h,e}v.prototype=null,t.exports=v},729:function(t,n,e){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function c(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,n){return(i=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function u(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,n){return!n||"object"!==r(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=e(81),l=new(function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&i(t,n)}(s,t);var n,e,r,a=u(s);function s(){return o(this,s),a.apply(this,arguments)}return n=s,(e=[{key:"content",value:function(t){var n=t.onError,e=t.onDone;return this.callTapsParallel({onError:function(t,e,r,o){return n(e)+o(!0)},onDone:e})}}])&&c(n.prototype,e),r&&c(n,r),s}(e(86))),p=function(t){return l.setup(this,t),l.create(t)};function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,e=new f(t,n);return e.constructor=y,e.compile=p,e._call=void 0,e.call=void 0,e}y.prototype=null,t.exports=y},730:function(t,n,e){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function c(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,n){return(i=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function u(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,n){return!n||"object"!==r(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=e(81),l=new(function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&i(t,n)}(s,t);var n,e,r,a=u(s);function s(){return o(this,s),a.apply(this,arguments)}return n=s,(e=[{key:"content",value:function(t){var n=t.onError,e=t.onResult,r=t.onDone,o="";return o+="var _results = new Array(".concat(this.options.taps.length,");\n"),o+="var _checkDone = function() {\n",o+="for(var i = 0; i < _results.length; i++) {\n",o+="var item = _results[i];\n",o+="if(item === undefined) return false;\n",o+="if(item.result !== undefined) {\n",o+=e("item.result"),o+="return true;\n",o+="}\n",o+="if(item.error) {\n",o+=n("item.error"),o+="return true;\n",o+="}\n",o+="}\n",o+="return false;\n",o+="}\n",o+=this.callTapsParallel({onError:function(t,n,e,r){var o="";return o+="if(".concat(t," < _results.length && ((_results.length = ").concat(t+1,"), (_results[").concat(t,"] = { error: ").concat(n," }), _checkDone())) {\n"),o+=r(!0),o+="} else {\n",o+=e(),o+="}\n"},onResult:function(t,n,e,r){var o="";return o+="if(".concat(t," < _results.length && (").concat(n," !== undefined && (_results.length = ").concat(t+1,"), (_results[").concat(t,"] = { result: ").concat(n," }), _checkDone())) {\n"),o+=r(!0),o+="} else {\n",o+=e(),o+="}\n"},onTap:function(t,n,e,r){var o="";return t>0&&(o+="if(".concat(t," >= _results.length) {\n"),o+=e(),o+="} else {\n"),o+=n(),t>0&&(o+="}\n"),o},onDone:r})}}])&&c(n.prototype,e),r&&c(n,r),s}(e(86))),p=function(t){return l.setup(this,t),l.create(t)};function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,e=new f(t,n);return e.constructor=y,e.compile=p,e._call=void 0,e.call=void 0,e}y.prototype=null,t.exports=y},731:function(t,n,e){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function c(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,n){return(i=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function u(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,n){return!n||"object"!==r(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=e(81),l=new(function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&i(t,n)}(s,t);var n,e,r,a=u(s);function s(){return o(this,s),a.apply(this,arguments)}return n=s,(e=[{key:"content",value:function(t){var n=t.onError,e=t.onDone;return this.callTapsSeries({onError:function(t,e,r,o){return n(e)+o(!0)},onDone:e})}}])&&c(n.prototype,e),r&&c(n,r),s}(e(86))),p=function(t){return l.setup(this,t),l.create(t)};function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,e=new f(t,n);return e.constructor=y,e.compile=p,e._call=void 0,e.call=void 0,e}y.prototype=null,t.exports=y},732:function(t,n,e){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function c(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,n){return(i=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function u(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,n){return!n||"object"!==r(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=e(81),l=new(function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&i(t,n)}(s,t);var n,e,r,a=u(s);function s(){return o(this,s),a.apply(this,arguments)}return n=s,(e=[{key:"content",value:function(t){var n=t.onError,e=t.onResult,r=t.resultReturns,o=t.onDone;return this.callTapsSeries({onError:function(t,e,r,o){return n(e)+o(!0)},onResult:function(t,n,r){return"if(".concat(n," !== undefined) {\n").concat(e(n),"\n} else {\n").concat(r(),"}\n")},resultReturns:r,onDone:o})}}])&&c(n.prototype,e),r&&c(n,r),s}(e(86))),p=function(t){return l.setup(this,t),l.create(t)};function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,e=new f(t,n);return e.constructor=y,e.compile=p,e._call=void 0,e.call=void 0,e}y.prototype=null,t.exports=y},733:function(t,n,e){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function c(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,n){return(i=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function u(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,n){return!n||"object"!==r(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=e(81),l=new(function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&i(t,n)}(s,t);var n,e,r,a=u(s);function s(){return o(this,s),a.apply(this,arguments)}return n=s,(e=[{key:"content",value:function(t){var n=t.onError,e=t.onDone;return this.callTapsLooping({onError:function(t,e,r,o){return n(e)+o(!0)},onDone:e})}}])&&c(n.prototype,e),r&&c(n,r),s}(e(86))),p=function(t){return l.setup(this,t),l.create(t)};function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,e=new f(t,n);return e.constructor=y,e.compile=p,e._call=void 0,e.call=void 0,e}y.prototype=null,t.exports=y},734:function(t,n,e){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function c(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,n){return(i=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function u(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,n){return!n||"object"!==r(n)&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=e(81),l=new(function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&i(t,n)}(s,t);var n,e,r,a=u(s);function s(){return o(this,s),a.apply(this,arguments)}return n=s,(e=[{key:"content",value:function(t){var n=this,e=t.onError,r=t.onResult;return t.onDone,this.callTapsSeries({onError:function(t,n,r,o){return e(n)+o(!0)},onResult:function(t,e,r){var o="";return o+="if(".concat(e," !== undefined) {\n"),o+="".concat(n._args[0]," = ").concat(e,";\n"),o+="}\n",o+=r()},onDone:function(){return r(n._args[0])}})}}])&&c(n.prototype,e),r&&c(n,r),s}(e(86))),p=function(t){return l.setup(this,t),l.create(t)};function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");var e=new f(t,n);return e.constructor=y,e.compile=p,e._call=void 0,e.call=void 0,e}y.prototype=null,t.exports=y},735:function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=e(314),i=function(t,n){return n},u=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;r(this,t),this._map=new Map,this.name=e,this._factory=n,this._interceptors=[]}var n,e,c;return n=t,(e=[{key:"get",value:function(t){return this._map.get(t)}},{key:"for",value:function(t){var n=this.get(t);if(void 0!==n)return n;for(var e=this._factory(t),r=this._interceptors,o=0;o<r.length;o++)e=r[o].factory(t,e);return this._map.set(t,e),e}},{key:"intercept",value:function(t){this._interceptors.push(Object.assign({factory:i},t))}}])&&o(n.prototype,e),c&&o(n,c),t}();u.prototype.tap=c.deprecate((function(t,n,e){return this.for(t).tap(n,e)}),"HookMap#tap(key,…) is deprecated. Use HookMap#for(key).tap(…) instead."),u.prototype.tapAsync=c.deprecate((function(t,n,e){return this.for(t).tapAsync(n,e)}),"HookMap#tapAsync(key,…) is deprecated. Use HookMap#for(key).tapAsync(…) instead."),u.prototype.tapPromise=c.deprecate((function(t,n,e){return this.for(t).tapPromise(n,e)}),"HookMap#tapPromise(key,…) is deprecated. Use HookMap#for(key).tapPromise(…) instead."),t.exports=u},736:function(t,n,e){"use strict";function r(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return o(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return o(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,c=function(){};return{s:c,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==e.return||e.return()}finally{if(a)throw i}}}}function o(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function c(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}e(81);var u=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;c(this,t),this.hooks=n,this.name=e}var n,e,o;return n=t,(e=[{key:"tap",value:function(t,n){var e,o=r(this.hooks);try{for(o.s();!(e=o.n()).done;)e.value.tap(t,n)}catch(t){o.e(t)}finally{o.f()}}},{key:"tapAsync",value:function(t,n){var e,o=r(this.hooks);try{for(o.s();!(e=o.n()).done;)e.value.tapAsync(t,n)}catch(t){o.e(t)}finally{o.f()}}},{key:"tapPromise",value:function(t,n){var e,o=r(this.hooks);try{for(o.s();!(e=o.n()).done;)e.value.tapPromise(t,n)}catch(t){o.e(t)}finally{o.f()}}},{key:"isUsed",value:function(){var t,n=r(this.hooks);try{for(n.s();!(t=n.n()).done;)if(t.value.isUsed())return!0}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"intercept",value:function(t){var n,e=r(this.hooks);try{for(e.s();!(n=e.n()).done;)n.value.intercept(t)}catch(t){e.e(t)}finally{e.f()}}},{key:"withOptions",value:function(n){return new t(this.hooks.map((function(t){return t.withOptions(n)})),this.name)}}])&&i(n.prototype,e),o&&i(n,o),t}();t.exports=u},81:function(t,n,e){"use strict";function r(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return o(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return o(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,c=function(){};return{s:c,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==e.return||e.return()}finally{if(a)throw i}}}}function o(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function u(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=e(314).deprecate((function(){}),"Hook.context is deprecated and will be removed"),s=function(){return this.call=this._createCall("sync"),this.call.apply(this,arguments)},f=function(){return this.callAsync=this._createCall("async"),this.callAsync.apply(this,arguments)},l=function(){return this.promise=this._createCall("promise"),this.promise.apply(this,arguments)},p=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;i(this,t),this._args=n,this.name=e,this.taps=[],this.interceptors=[],this._call=s,this.call=s,this._callAsync=f,this.callAsync=f,this._promise=l,this.promise=l,this._x=void 0,this.compile=this.compile,this.tap=this.tap,this.tapAsync=this.tapAsync,this.tapPromise=this.tapPromise}var n,e,o;return n=t,(e=[{key:"compile",value:function(t){throw new Error("Abstract: should be overridden")}},{key:"_createCall",value:function(t){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:t})}},{key:"_tap",value:function(t,n,e){if("string"==typeof n)n={name:n.trim()};else if("object"!==c(n)||null===n)throw new Error("Invalid tap options");if("string"!=typeof n.name||""===n.name)throw new Error("Missing name for tap");void 0!==n.context&&a(),n=Object.assign({type:t,fn:e},n),n=this._runRegisterInterceptors(n),this._insert(n)}},{key:"tap",value:function(t,n){this._tap("sync",t,n)}},{key:"tapAsync",value:function(t,n){this._tap("async",t,n)}},{key:"tapPromise",value:function(t,n){this._tap("promise",t,n)}},{key:"_runRegisterInterceptors",value:function(t){var n,e=r(this.interceptors);try{for(e.s();!(n=e.n()).done;){var o=n.value;if(o.register){var c=o.register(t);void 0!==c&&(t=c)}}}catch(t){e.e(t)}finally{e.f()}return t}},{key:"withOptions",value:function(t){var n=this,e=function(n){return Object.assign({},t,"string"==typeof n?{name:n}:n)};return{name:this.name,tap:function(t,r){return n.tap(e(t),r)},tapAsync:function(t,r){return n.tapAsync(e(t),r)},tapPromise:function(t,r){return n.tapPromise(e(t),r)},intercept:function(t){return n.intercept(t)},isUsed:function(){return n.isUsed()},withOptions:function(t){return n.withOptions(e(t))}}}},{key:"isUsed",value:function(){return this.taps.length>0||this.interceptors.length>0}},{key:"intercept",value:function(t){if(this._resetCompilation(),this.interceptors.push(Object.assign({},t)),t.register)for(var n=0;n<this.taps.length;n++)this.taps[n]=t.register(this.taps[n])}},{key:"_resetCompilation",value:function(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise}},{key:"_insert",value:function(t){var n;this._resetCompilation(),"string"==typeof t.before?n=new Set([t.before]):Array.isArray(t.before)&&(n=new Set(t.before));var e=0;"number"==typeof t.stage&&(e=t.stage);for(var r=this.taps.length;r>0;){r--;var o=this.taps[r];this.taps[r+1]=o;var c=o.stage||0;if(n){if(n.has(o.name)){n.delete(o.name);continue}if(n.size>0)continue}if(!(c>e)){r++;break}}this.taps[r]=t}}])&&u(n.prototype,e),o&&u(n,o),t}();Object.setPrototypeOf(p.prototype,null),t.exports=p},86:function(t,n,e){"use strict";function r(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return o(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return o(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,c=function(){};return{s:c,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==e.return||e.return()}finally{if(a)throw i}}}}function o(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function c(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=n,this.options=void 0,this._args=void 0}var n,e,o;return n=t,(e=[{key:"create",value:function(t){var n;switch(this.init(t),this.options.type){case"sync":n=new Function(this.args(),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:function(t){return"throw ".concat(t,";\n")},onResult:function(t){return"return ".concat(t,";\n")},resultReturns:!0,onDone:function(){return""},rethrowIfPossible:!0}));break;case"async":n=new Function(this.args({after:"_callback"}),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:function(t){return"_callback(".concat(t,");\n")},onResult:function(t){return"_callback(null, ".concat(t,");\n")},onDone:function(){return"_callback();\n"}}));break;case"promise":var e=!1,r=this.contentWithInterceptors({onError:function(t){return e=!0,"_error(".concat(t,");\n")},onResult:function(t){return"_resolve(".concat(t,");\n")},onDone:function(){return"_resolve();\n"}}),o="";o+='"use strict";\n',o+=this.header(),o+="return new Promise((function(_resolve, _reject) {\n",e&&(o+="var _sync = true;\n",o+="function _error(_err) {\n",o+="if(_sync)\n",o+="_resolve(Promise.resolve().then((function() { throw _err; })));\n",o+="else\n",o+="_reject(_err);\n",o+="};\n"),o+=r,e&&(o+="_sync = false;\n"),o+="}));\n",n=new Function(this.args(),o)}return this.deinit(),n}},{key:"setup",value:function(t,n){t._x=n.taps.map((function(t){return t.fn}))}},{key:"init",value:function(t){this.options=t,this._args=t.args.slice()}},{key:"deinit",value:function(){this.options=void 0,this._args=void 0}},{key:"contentWithInterceptors",value:function(t){var n=this;if(this.options.interceptors.length>0){for(var e=t.onError,r=t.onResult,o=t.onDone,c="",i=0;i<this.options.interceptors.length;i++){var u=this.options.interceptors[i];u.call&&(c+="".concat(this.getInterceptor(i),".call(").concat(this.args({before:u.context?"_context":void 0}),");\n"))}return c+=this.content(Object.assign(t,{onError:e&&function(t){for(var r="",o=0;o<n.options.interceptors.length;o++)n.options.interceptors[o].error&&(r+="".concat(n.getInterceptor(o),".error(").concat(t,");\n"));return r+=e(t)},onResult:r&&function(t){for(var e="",o=0;o<n.options.interceptors.length;o++)n.options.interceptors[o].result&&(e+="".concat(n.getInterceptor(o),".result(").concat(t,");\n"));return e+=r(t)},onDone:o&&function(){for(var t="",e=0;e<n.options.interceptors.length;e++)n.options.interceptors[e].done&&(t+="".concat(n.getInterceptor(e),".done();\n"));return t+=o()}}))}return this.content(t)}},{key:"header",value:function(){var t="";return this.needContext()?t+="var _context = {};\n":t+="var _context;\n",t+="var _x = this._x;\n",this.options.interceptors.length>0&&(t+="var _taps = this.taps;\n",t+="var _interceptors = this.interceptors;\n"),t}},{key:"needContext",value:function(){var t,n=r(this.options.taps);try{for(n.s();!(t=n.n()).done;)if(t.value.context)return!0}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"callTap",value:function(t,n){for(var e=n.onError,r=n.onResult,o=n.onDone,c=n.rethrowIfPossible,i="",u=!1,a=0;a<this.options.interceptors.length;a++){var s=this.options.interceptors[a];s.tap&&(u||(i+="var _tap".concat(t," = ").concat(this.getTap(t),";\n"),u=!0),i+="".concat(this.getInterceptor(a),".tap(").concat(s.context?"_context, ":"","_tap").concat(t,");\n"))}i+="var _fn".concat(t," = ").concat(this.getTapFn(t),";\n");var f=this.options.taps[t];switch(f.type){case"sync":c||(i+="var _hasError".concat(t," = false;\n"),i+="try {\n"),i+=r?"var _result".concat(t," = _fn").concat(t,"(").concat(this.args({before:f.context?"_context":void 0}),");\n"):"_fn".concat(t,"(").concat(this.args({before:f.context?"_context":void 0}),");\n"),c||(i+="} catch(_err) {\n",i+="_hasError".concat(t," = true;\n"),i+=e("_err"),i+="}\n",i+="if(!_hasError".concat(t,") {\n")),r&&(i+=r("_result".concat(t))),o&&(i+=o()),c||(i+="}\n");break;case"async":var l="";l+=r?"(function(_err".concat(t,", _result").concat(t,") {\n"):"(function(_err".concat(t,") {\n"),l+="if(_err".concat(t,") {\n"),l+=e("_err".concat(t)),l+="} else {\n",r&&(l+=r("_result".concat(t))),o&&(l+=o()),l+="}\n",l+="})",i+="_fn".concat(t,"(").concat(this.args({before:f.context?"_context":void 0,after:l}),");\n");break;case"promise":i+="var _hasResult".concat(t," = false;\n"),i+="var _promise".concat(t," = _fn").concat(t,"(").concat(this.args({before:f.context?"_context":void 0}),");\n"),i+="if (!_promise".concat(t," || !_promise").concat(t,".then)\n"),i+="  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise".concat(t," + ')');\n"),i+="_promise".concat(t,".then((function(_result").concat(t,") {\n"),i+="_hasResult".concat(t," = true;\n"),r&&(i+=r("_result".concat(t))),o&&(i+=o()),i+="}), function(_err".concat(t,") {\n"),i+="if(_hasResult".concat(t,") throw _err").concat(t,";\n"),i+=e("_err".concat(t)),i+="});\n"}return i}},{key:"callTapsSeries",value:function(t){var n=this,e=t.onError,r=t.onResult,o=t.resultReturns,c=t.onDone,i=t.doneReturns,u=t.rethrowIfPossible;if(0===this.options.taps.length)return c();for(var a=this.options.taps.findIndex((function(t){return"sync"!==t.type})),s=o||i,f="",l=c,p=0,y=function(t){var o=t;l!==c&&("sync"!==n.options.taps[o].type||p++>20)&&(p=0,f+="function _next".concat(o,"() {\n"),f+=l(),f+="}\n",l=function(){return"".concat(s?"return ":"","_next").concat(o,"();\n")});var i=l,y=function(t){return t?"":c()},h=n.callTap(o,{onError:function(t){return e(o,t,i,y)},onResult:r&&function(t){return r(o,t,i,y)},onDone:!r&&i,rethrowIfPossible:u&&(a<0||o<a)});l=function(){return h}},h=this.options.taps.length-1;h>=0;h--)y(h);return f+=l()}},{key:"callTapsLooping",value:function(t){var n=t.onError,e=t.onDone,r=t.rethrowIfPossible;if(0===this.options.taps.length)return e();var o=this.options.taps.every((function(t){return"sync"===t.type})),c="";o||(c+="var _looper = (function() {\n",c+="var _loopAsync = false;\n"),c+="var _loop;\n",c+="do {\n",c+="_loop = false;\n";for(var i=0;i<this.options.interceptors.length;i++){var u=this.options.interceptors[i];u.loop&&(c+="".concat(this.getInterceptor(i),".loop(").concat(this.args({before:u.context?"_context":void 0}),");\n"))}return c+=this.callTapsSeries({onError:n,onResult:function(t,n,e,r){var c="";return c+="if(".concat(n," !== undefined) {\n"),c+="_loop = true;\n",o||(c+="if(_loopAsync) _looper();\n"),c+=r(!0),c+="} else {\n",c+=e(),c+="}\n"},onDone:e&&function(){var t="";return t+="if(!_loop) {\n",t+=e(),t+="}\n"},rethrowIfPossible:r&&o}),c+="} while(_loop);\n",o||(c+="_loopAsync = true;\n",c+="});\n",c+="_looper();\n"),c}},{key:"callTapsParallel",value:function(t){var n=this,e=t.onError,r=t.onResult,o=t.onDone,c=t.rethrowIfPossible,i=t.onTap,u=void 0===i?function(t,n){return n()}:i;if(this.options.taps.length<=1)return this.callTapsSeries({onError:e,onResult:r,onDone:o,rethrowIfPossible:c});var a="";a+="do {\n",a+="var _counter = ".concat(this.options.taps.length,";\n"),o&&(a+="var _done = (function() {\n",a+=o(),a+="});\n");for(var s=function(t){var i=function(){return o?"if(--_counter === 0) _done();\n":"--_counter;"},s=function(t){return t||!o?"_counter = 0;\n":"_counter = 0;\n_done();\n"};a+="if(_counter <= 0) break;\n",a+=u(t,(function(){return n.callTap(t,{onError:function(n){var r="";return r+="if(_counter > 0) {\n",r+=e(t,n,i,s),r+="}\n"},onResult:r&&function(n){var e="";return e+="if(_counter > 0) {\n",e+=r(t,n,i,s),e+="}\n"},onDone:!r&&function(){return i()},rethrowIfPossible:c})}),i,s)},f=0;f<this.options.taps.length;f++)s(f);return a+="} while(false);\n"}},{key:"args",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.before,e=t.after,r=this._args;return n&&(r=[n].concat(r)),e&&(r=r.concat(e)),0===r.length?"":r.join(", ")}},{key:"getTapFn",value:function(t){return"_x[".concat(t,"]")}},{key:"getTap",value:function(t){return"_taps[".concat(t,"]")}},{key:"getInterceptor",value:function(t){return"_interceptors[".concat(t,"]")}}])&&c(n.prototype,e),o&&c(n,o),t}();t.exports=i}}]);