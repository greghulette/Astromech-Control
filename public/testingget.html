<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        body {
            background-color: Black;
            background-image: url(..//Images/darkbluebackground4.jpg);
            background-size:cover;
            /* background-repeat:repeat; */
            background-position: top center;
            font-size: 1.5rem;
            color: lightyellow;
            font-family: 'Star Jedi', arial;


            }
        .applyButton{
        /* background-image: url(..//Images/Buttons/Button-Apply.png); */
        background-size: cover;
        /* opacity: 1; */
        /* border: 1px; */
        position: absolute;
        top:225px;
        left: 25px;
        height: 60px;
        width: 150px;

        opacity: .9;
}
        .buttonspacing{
         position: fixed;
         left: 500px;
        }

        .buttonspacing1{
         position: fixed;
         left: 300px;
        }
        .buttonspacing2{
         position: relative;
         left: 650px;
        }

    </style>
</head>
<body>
    <iframe name="submit" style="display:none;"> </iframe>
    <form action="http://192.168.8.142/" method="get" target="submit">
  <div class="buttonspacing1">
    <label for="param1">Command for Serial1:</label>
    <input name="param1" id="param1" value=":PP0:P100:P0">
  </div>
  <br>
  <div>
    <button class="buttonspacing" >Submit</button>
  </div>

  <br>
  <br>
</form>
  <iframe name="submit1" style="display:none;" ></iframe>
  <form action="http://192.168.8.142/" method="GET" target="submit1">
<div>
  <!-- <label for="param2">Top</label> -->
  <input type="hidden" name="param2" id="param2" value=":PP100">
</div>
<div>
  <button class="buttonspacing" >Top</button>
</div>
</form>
<br>
<iframe name="submit1" style="display:none;" ></iframe>
<form action="http://192.168.8.142/" method="GET" target="submit1">
<div>
<!-- <label for="param2">Top</label> -->
<input type="hidden" name="param1" id="param1" value=":PP50">
</div>
<div>
<button class="buttonspacing" >Middle</button>
</div>
</form>
<br>

<iframe name="submit1" style="display:none;" ></iframe>
<form action="http://192.168.8.142/" method="GET" target="submit1">
<div>
<!-- <label for="param2">Top</label> -->
<input type="hidden" name="param1" id="param1" value=":PP0">
</div>
<div>
<button class="buttonspacing" >Bottom</button>
</div>
</form>

<br>
<br>

<iframe name="submit3" style="display:none;" ></iframe>
<form action="http://192.168.8.142/" method="get" target="submit3">
<div class="buttonspacing1" >
<label for="paramrange">Select Height</label>

<input type="hidden" name="param1" id="paramrange" value=":PP">
<input type="range" id="heightRange" min="0" max="100" step="10" value="50">
<!-- <img src="Images/Buttons/Button-Apply.png" onclick="getRange('heightRange')" class="applyButton"></img> -->


<!-- <img src="Images/Buttons/Button-Off-WhiteNT.png" onclick="getRange('heightRange')" class="applyButton"></img> -->
</div>
<div class="buttonspacing2" id="sliderAmount">50</div>
</form>



  <script>

var slide = document.getElementById('heightRange'),
    sliderDiv = document.getElementById("sliderAmount");


slide.onchange = function() {
    sliderDiv.innerHTML = this.value;
    let slidervalue1 = this.value;
    console.log(slidervalue1);
    getRange(slidervalue1);
}
function getSliderValue(t) {
  var slider1 = document.getElementById(t).value;
  return slider1;
}

function getRange(t)
{
    var periscopeHeight =t;
    var periscopeESPURL = "http://192.168.8.142/?param1=:PP";
    var periscopeESPFullURL = periscopeESPURL + periscopeHeight;
    console.log(periscopeESPFullURL);
    // alert(periscopeESPFullURL);
    httpGet(periscopeESPFullURL)
};


function httpGet(theUrl)
{
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
    xmlHttp.send( null );
    return xmlHttp.responseText;
}


/**
 * Get the user IP throught the webkitRTCPeerConnection
 * @param onNewIP {Function} listener function to expose the IP locally
 * @return undefined
 */
 function getUserIP(onNewIP) { //  onNewIp - your listener function for new IPs
    //compatibility for firefox and chrome
    var myPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;
    var pc = new myPeerConnection({
        iceServers: []
    }),
    noop = function() {},
    localIPs = {},
    ipRegex = /([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g,
    key;

    function iterateIP(ip) {
        if (!localIPs[ip]) onNewIP(ip);
        localIPs[ip] = true;
    }

     //create a bogus data channel
    pc.createDataChannel("");

    // create offer and set local description
    pc.createOffer().then(function(sdp) {
        sdp.sdp.split('\n').forEach(function(line) {
            if (line.indexOf('candidate') < 0) return;
            line.match(ipRegex).forEach(iterateIP);
        });
        
        pc.setLocalDescription(sdp, noop, noop);
    }).catch(function(reason) {
        // An error occurred, so handle the failure to connect
    });

    //listen for candidate events
    pc.onicecandidate = function(ice) {
        if (!ice || !ice.candidate || !ice.candidate.candidate || !ice.candidate.candidate.match(ipRegex)) return;
        ice.candidate.candidate.match(ipRegex).forEach(iterateIP);
    };
}

// Usage

getUserIP(function(ip){
    alert("Got IP! :" + ip);
});

</script>

</body>


</html>